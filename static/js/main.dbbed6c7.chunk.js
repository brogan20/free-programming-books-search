(this.webpackJsonpfpb_search_page=this.webpackJsonpfpb_search_page||[]).push([[0],{28:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(20),s=n.n(r),o=(n(28),n(21)),i=n(5),u=n(4),l=n(3),h=n(11),j=n.n(h),b=n(0);var d=function(e){var t,n=e.changeParameter,a=e.data,r=Object(c.useState)([]),s=Object(l.a)(r,2),o=s[0],i=s[1];return Object(c.useEffect)((function(){if(a){var e=[];a.children[0].children.forEach((function(t){"string"===typeof t.language.name&&t.language.name.length>0&&e.push(t.language)})),e.sort((function(e,t){return e.name>t.name})),i(e)}}),[a]),t=o&&o.map((function(e){return function(e){return Object(b.jsx)("option",{class:"lang",value:e.code,children:e.name},e.code)}(e)})),Object(b.jsxs)("select",{onChange:function(e){n("lang.code",e.target.value)},name:"languages",id:"languages",children:[Object(b.jsx)("option",{value:"",children:"All Languages"},"allLangs"),t]})};var f=function(e){return Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault()},name:"searchBar",children:Object(b.jsx)("input",{autoComplete:"off",type:"text",name:"searchTerm",placeholder:"Enter Book Name",onChange:function(t){e.changeParameter("title",t.target.value)}})})};var g=function(e){var t=e.data;return Object(b.jsxs)("div",{class:"result",children:[Object(b.jsx)("h3",{children:Object(b.jsx)("a",{href:t.url,target:"_blank",children:t.title})}),Object(b.jsxs)("h4",{children:["by ",t.author?t.author:"Unknown Author"]}),Object(b.jsxs)("p",{children:["(",t.lang.code,")"]})]})},O=n(22),p=n.n(O),m=n(23),v=null;function x(e){var t=[],n=[];return e.children[0].children.forEach((function(e){e.sections.forEach((function(c){n.includes(c.section)||n.push(c.section),c.entries.forEach((function(n){t.push({author:n.author,title:n.title,url:n.url,lang:e.language,section:c.section})})),c.subsections.forEach((function(n){n.entries.forEach((function(a){t.push({author:a.author,title:a.title,url:a.url,lang:e.language,section:c.section,subsection:n.section})}))}))}))})),{arr:t,sections:n}}var S=function(){var e=Object(c.useState)(void 0),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),s=Object(l.a)(r,2),h=s[0],O=s[1],S=Object(c.useState)([]),E=Object(l.a)(S,2),k=(E[0],E[1]),w=Object(c.useState)(!0),y=Object(l.a)(w,2),F=y[0],P=y[1],B=Object(c.useState)({title:""}),C=Object(l.a)(B,2),L=C[0],T=C[1],_=Object(c.useState)([]),N=Object(l.a)(_,2),A=N[0],D=N[1],I=Object(c.useState)([]),J=Object(l.a)(I,2),M=J[0],R=J[1],U=Object(c.useState)(""),$=Object(l.a)(U,2),q=$[0],z=($[1],null),G=null,H=function(e,t){T(Object(u.a)(Object(u.a)({},L),{},Object(i.a)({},e,t)))};return Object(c.useEffect)((function(){function e(){return(e=Object(o.a)(j.a.mark((function e(){var t,n,c,r,s,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),e.next=4,p.a.get("https://raw.githubusercontent.com/FreeEbookFoundationBot/free-programming-books-json/main/fpb.json");case 4:t=e.sent,a(t.data),n=x(t.data),c=n.arr,r=n.sections,O(c),k(r),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),a(v),s=x(v),o=s.arr,i=s.sections,k(i),O(o);case 17:P(!1);case 18:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(c.useEffect)((function(){if(h){for(var e=new m.a(h,{useExtendedSearch:!0,findAllMatches:!0,shouldSort:!0,includeScore:!0,threshold:.2,keys:["title","lang.code"]}),t=[],n=0,c=Object.entries(L);n<c.length;n++){var a=Object(l.a)(c[n],2),r=a[0],s=a[1];null!==s&&""!==s&&("lang.code"!==r?t.push(Object(i.a)({},r,s)):t.push({"lang.code":"^".concat(s)}))}var o=e.search({$and:t});o=o.slice(0,40),D(o);var u=[];o.forEach((function(e){var t=e.item.section;u.includes(t)||u.push(t)})),R(u)}}),[L,h]),F?Object(b.jsx)("h1",{children:"Loading..."}):q?Object(b.jsxs)("h1",{children:["Error: ",q]}):(L.title&&0!==A.length&&(z=A&&A.map((function(e){return Object(b.jsx)(g,{data:e.item})})),G=M&&M.map((function(e){return Object(b.jsx)("li",{children:e})}))),Object(b.jsxs)("div",{className:"frontPage",children:[Object(b.jsx)("h1",{children:"Free Programming Books"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{changeParameter:H}),Object(b.jsx)(d,{changeParameter:H,data:n})]}),Object(b.jsx)("h2",{children:"Section Results"}),G&&Object(b.jsx)("p",{children:"This feature is not complete! For now, use this to help reference the markdown documents on the main respository."}),Object(b.jsx)("div",{className:"search-results",children:G}),Object(b.jsx)("h2",{children:"Top Results"}),Object(b.jsx)("div",{className:"search-results",children:z})]}))},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),E()}},[[49,1,2]]]);
//# sourceMappingURL=main.dbbed6c7.chunk.js.map